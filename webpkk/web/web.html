<!DOCTYPE html>
<html>
<head>
    <title>KERANJANG & TRANSAKSI</title>
    <style>
        body {
            font-family: Arial;
            background: #f5f5f5;
            padding: 20px;
        }

        .card {
            width: 350px;
            background: white;
            padding: 20px;
            border: 2px solid #999;
            border-radius: 20px;
            margin: auto;
            margin-bottom: 20px;
        }

        h2 { text-align: center; }

        input, select {
            width: 95%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #aaa;
            border-radius: 5px;
        }

        .row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 5px 10px;
            background: #ddd;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        .btn:hover { background: #ccc; }

        .hidden { display: none; }

        /* Keranjang */
        .product-card, .cart-item {
            border: 1px solid #aaa;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px;
            background: #fff;
        }

        .quantity-btn {
            padding: 5px 8px;
            margin: 2px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        .btn-delete {
            padding: 5px 8px;
            background: red;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            border: none;
        }

        .go-transaksi {
            width: 100%;
            background: #28a745;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .go-transaksi:hover {
            background: #1e7e34;
        }

        .bigbox {
            text-align: center;
            padding: 15px;
            border: 2px solid #777;
            border-radius: 15px;
            font-size: 22px;
            font-weight: bold;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<!-- ==================== HALAMAN KERANJANG ==================== -->
<div id="keranjangPage" class="card">
    <h2>KERANJANG PESANAN</h2>

    <div id="cart-items"></div>

    <button class="go-transaksi" onclick="bukaTransaksi()">LANJUTKAN PEMBAYARAN</button>
</div>

<!-- ==================== HALAMAN TRANSAKSI ==================== -->
<div id="transaksiPage" class="card hidden">
    <h2>TRANSAKSI PEMBELI</h2>

    <label>ID Pembeli</label>
    <input type="text" id="idPembeli" placeholder="Masukkan ID Anda">

    <label>Nama Produk</label>
    <input type="text" id="namaProduk" readonly>

    <label>Total Produk</label>
    <input type="number" id="jumlahProduk" readonly>

    <label>Total Harga</label>
    <input type="text" id="totalHarga" readonly>

    <div class="bigbox" id="totalBawah">TOTAL: Rp 0</div>
</div>

<script>
/* ================================================================
   DATA PRODUK
================================================================ */
const product = [
    {
        id: "1",
        name: "Rice Bowl Chicken Katsu",
        image: "katsu.png",
        price: 12000
    }
];

/* ================================================================
   KERANJANG
================================================================ */
let cart = [];

function loadCart() {
    const saved = localStorage.getItem("cartData");
    cart = saved ? JSON.parse(saved) : [];
}

function saveCart() {
    localStorage.setItem("cartData", JSON.stringify(cart));
}

/* ================================================================
   TAMPILKAN PRODUK DI KERANJANG
================================================================ */
const cartContainer = document.getElementById("cart-items");

function updateKeranjang() {
    if (!cartContainer) return;

    cartContainer.innerHTML = "";

    if (cart.length === 0) {
        cartContainer.innerHTML = "<p>Keranjang kosong</p>";
        return;
    }

    cart.forEach(item => {
        const itemDiv = document.createElement("div");
        itemDiv.className = "cart-item";
        itemDiv.innerHTML = `
            <h4>${item.name}</h4>
            <p>Rp ${item.price.toLocaleString()} x ${item.quantity}</p>
            <p>Total: Rp ${(item.price * item.quantity).toLocaleString()}</p>

            <div>
                <button class="quantity-btn" onclick="kurangiQty('${item.id}')">-</button>
                <button class="quantity-btn" onclick="tambahQty('${item.id}')">+</button>
                <button class="btn-delete" onclick="hapusItem('${item.id}')">ðŸ—‘</button>
            </div>
        `;
        cartContainer.appendChild(itemDiv);
    });

    saveCart();
}

function tambahQty(id) {
    const item = cart.find(p => p.id === id);
    item.quantity++;
    saveCart();
    updateKeranjang();
}

function kurangiQty(id) {
    const index = cart.findIndex(p => p.id === id);

    if (cart[index].quantity > 1) {
        cart[index].quantity--;
    } else {
        cart.splice(index, 1);
    }

    saveCart();
    updateKeranjang();
}

function hapusItem(id) {
    cart = cart.filter(item => item.id !== id);
    saveCart();
    updateKeranjang();
}

/* ================================================================
   PINDAH KE HALAMAN TRANSAKSI
================================================================ */
function bukaTransaksi() {
    if (cart.length === 0) {
        alert("Keranjang masih kosong!");
        return;
    }

    document.getElementById("keranjangPage").classList.add("hidden");
    document.getElementById("transaksiPage").classList.remove("hidden");

    let item = cart[0];

    document.getElementById("namaProduk").value = item.name;
    document.getElementById("jumlahProduk").value = item.quantity;

    let total = item.quantity * item.price;

    document.getElementById("totalHarga").value = "Rp " + total.toLocaleString();
    document.getElementById("totalBawah").innerHTML = "TOTAL: Rp " + total.toLocaleString();
}

/* ================================================================
   LOAD AWAL
================================================================ */
loadCart();
updateKeranjang();
</script>

</body>
</html>