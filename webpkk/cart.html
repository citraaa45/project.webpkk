<!DOCTYPE html>
<html>
<head>
    <title>Keranjang Belanja</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .product-card, .cart-item {
            background: white; padding: 15px; margin-bottom: 10px;
            border-radius: 10px; box-shadow: 0 0 5px #ccc;
        }
        button { padding: 8px 12px; border: none; cursor: pointer; border-radius: 5px; }
        .btn-plus { background: #4caf50; color: white; }
        .btn-minus { background: #ff9800; color: white; }
        .btn-delete { background: red; color: white; }
        .btn-transaksi { background: #2196f3; color: white; margin-top: 15px; width: 100%; }
    </style>
</head>

<body>

<h2>Menu Produk</h2>
<div id="product-list"></div>

<h2>Keranjang</h2>
<div id="cart-items"></div>

<button class="btn-transaksi" onclick="goTransaksi()">Ke Halaman Transaksi</button>

<script>
// ===================== DATA PRODUK =====================
const product = [
    { id: "1", name: "Rice Bowl Chicken Katsu", image: "katsu.png", price: 12000 }
];

// ===================== KERANJANG =====================
let cart = [];

function saveCart() {
    localStorage.setItem("cartData", JSON.stringify(cart));
}
function loadCart() {
    cart = JSON.parse(localStorage.getItem("cartData")) || [];
}

// ===================== TAMPIL PRODUK =====================
const productList = document.getElementById("product-list");

product.forEach(p => {
    const card = document.createElement("div");
    card.className = "product-card";
    card.innerHTML = `
        <h3>${p.name}</h3>
        <p>Harga: Rp ${p.price.toLocaleString()}</p>
        <button onclick="addCart('${p.id}')">Tambah ke Keranjang</button>
    `;
    productList.appendChild(card);
});

// ===================== TOMBOL TAMBAH KERANJANG =====================
function addCart(id) {
    const p = product.find(x => x.id === id);
    const cek = cart.find(x => x.id === id);

    if (cek) cek.quantity++;
    else cart.push({ ...p, quantity: 1 });

    saveCart();
    showCart();
}

function showCart() {
    const area = document.getElementById("cart-items");
    area.innerHTML = "";

    if (cart.length === 0) {
        area.innerHTML = "<p>Keranjang kosong</p>";
        return;
    }

    cart.forEach(item => {
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
            <h4>${item.name}</h4>
            <p>Rp ${item.price.toLocaleString()} x ${item.quantity}</p>
            <button class="btn-minus" onclick="minusQty('${item.id}')">-</button>
            <button class="btn-plus" onclick="plusQty('${item.id}')">+</button>
            <button class="btn-delete" onclick="delItem('${item.id}')">Hapus</button>
        `;
        area.appendChild(div);
    });

    saveCart();
}

function plusQty(id) {
    const x = cart.find(i => i.id === id);
    x.quantity++;
    saveCart();
    showCart();
}

function minusQty(id) {
    const index = cart.findIndex(i => i.id === id);
    if (cart[index].quantity > 1) cart[index].quantity--;
    else cart.splice(index, 1);

    saveCart();
    showCart();
}

function delItem(id) {
    cart = cart.filter(i => i.id !== id);
    saveCart();
    showCart();
}

// ===================== KE HALAMAN TRANSAKSI =====================
function goTransaksi() {
    window.location.href = "transaksi.html";
}

// ===================== LOAD =====================
loadCart();
showCart();
</script>
</body>
</html>